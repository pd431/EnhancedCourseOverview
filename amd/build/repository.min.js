/**
 * Repository functions for enhanced course overview
 *
 * @module     block_enhanced_course_overview/repository
 * @copyright  2025 Your Name
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define(["core/ajax"],(function(e){let r=null;return{getFilterPatterns:function(){if(null!==r)return Promise.resolve(r);return e.call([{methodname:"block_enhanced_course_overview_get_filter_patterns",args:{}}])[0].then((e=>(r=e,e))).catch((e=>(console.error("Error fetching filter patterns:",e),{timeframe:{},campus:[],role:[]})))},checkCourseFilter:function(e,r,n){let t=null;if("timeframe"===r){const r=n.match(/^Term(\d)_(\d{4})$/);if(r){return t=`_${r[1]}_${r[2]}`,-1!==e.fullname.indexOf(t)}}else if("campus"===r){if("Main_campus"===n)return-1!==e.fullname.indexOf("_A_");if("Secondary_campus"===n)return-1!==e.fullname.indexOf("_B_")}else if("role"===r){if(e.roles&&Array.isArray(e.roles)){if("ModuleLead_role"===n)return e.roles.includes("editingteacher");if("Assistant_role"===n)return e.roles.includes("teacher");if("Student_role"===n)return e.roles.includes("student")}return!1}return!1},saveUserFilters:function(r){const n={methodname:"block_enhanced_course_overview_save_filters",args:{filters:JSON.stringify(r)}};return e.call([n])[0].catch((e=>{console.error("Error saving filter preferences:",e)}))}}}));